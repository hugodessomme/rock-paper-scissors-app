<?php
    include './Game.php';

    session_start();

    if (isset($_GET['reset'])) {
        session_destroy();
        header('Location: .');
    }

    $game = new Game();

    if ($game->isDone()) {
        $game->setPlayerChoice($_POST['choice']);        

        $game->fight();
    }
?>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Rock, paper, scissors</title>
    <link rel="stylesheet" href="/css/normalize.css">
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Delius+Unicase:400,700" rel="stylesheet">
</head>
<body>
    <div class="container">
        <h1 class="title">Rock, paper, scissors</h1>

        <div class="scoreboard box box--compact box--border">
            <p class="scoreboard__title">Score</p>
            <div class="scoreboard__points">
                <span class="scoreboard__point scoreboard__player"><?php echo $game->getPlayerScore(); ?></span> - <span class="scoreboard__point scoreboard__opponent"><?php echo $game->getOpponentScore(); ?></span>
            </div>

            <a href="/?reset=1" class="scoreboard__clear">Clear score</a>
        </div>
    
        <div class="box box--compact box--info">
            <p><?php echo $game->isDone() ? $game->getMessage() : 'Choose your weapon'; ?></p>
        </div>
    
        <div class="box">
            <form method="post">
                <div class="choices">
                    <!-- Rock -->
                    <div>
                        <input type="radio" id="rock" name="choice" value="r">
                        <label for="rock" class="choice choice--rock">
                            <svg viewBox="0 -10 410.83733 410" width="75" height="75" xmlns="http://www.w3.org/2000/svg"><path d="m400.171875 219.273438c0 34.132812-13.65625 66.984374-37.761719 91.09375l-37.757812 37.542968c-19.839844 20.054688-47.148438 31.363282-75.308594 31.363282h-105.171875c-47.148437 0-85.335937-38.1875-85.335937-85.335938v-42.664062l-37.117188-37.121094c-14.722656-14.71875-14.722656-38.613282 0-53.332032 14.71875-14.722656 38.613281-14.722656 53.332031 0l-21.332031-21.335937c-7.253906-7.253906-10.882812-16.640625-11.09375-26.238281 0-9.8125 3.625-19.628906 11.09375-27.09375 14.71875-14.71875 38.613281-14.71875 53.332031 0l16 16c-7.253906-7.253906-10.878906-16.640625-11.09375-26.027344v-.214844c0-9.8125 3.628907-19.625 11.09375-27.089844 14.71875-14.722656 38.613281-14.722656 53.332031 0l26.667969 26.664063c-7.253906-7.253906-10.878906-16.640625-11.09375-26.027344-.214843-9.8125 3.628907-19.839843 11.09375-27.304687 14.71875-14.71875 38.613281-14.71875 53.332031 0l106.027344 106.027344c24.105469 24.105468 37.761719 56.957031 37.761719 91.09375zm0 0" fill="#ffcc80"/><path d="m249.324219 389.917969h-105.152344c-52.929687 0-96-43.074219-96-96v-38.25l-34.027344-34.027344c-18.859375-18.859375-18.859375-49.558594 0-68.417969 7.1875-7.167968 16.234375-11.816406 26.046875-13.480468-12.628906-18.796876-10.644531-44.566407 5.953125-61.164063 15.019531-15.019531 37.480469-18.089844 55.574219-9.214844 1.277344-10.285156 5.867188-20.246093 13.757812-28.117187 18.285157-18.304688 47.703126-18.859375 66.6875-1.644532 1.816407-9.40625 6.378907-18.089843 13.3125-25.023437 18.878907-18.878906 49.535157-18.878906 68.417969 0l106.089844 106.113281c26.347656 26.347656 40.851563 61.355469 40.851563 98.582032 0 37.226562-14.503907 72.234374-40.851563 98.601562l-37.71875 37.71875c-22.164063 22.121094-51.625 34.324219-82.941406 34.324219zm-179.820313-112.917969v16.917969c0 41.171875 33.492188 74.667969 74.667969 74.667969h105.152344c25.640625 0 49.746093-9.984376 67.882812-28.121094l37.714844-37.714844c22.316406-22.316406 34.601563-51.988281 34.601563-83.519531s-12.285157-61.183594-34.601563-83.5l-106.089844-106.113281c-10.21875-10.21875-28.03125-10.21875-38.25 0-10.539062 10.539062-10.539062 27.714843 0 38.253906l5.140625 5.140625c2.089844 2.089843 3.113282 4.820312 3.113282 7.550781s-1.042969 5.460938-3.113282 7.550781c-4.160156 4.160157-10.921875 4.160157-15.082031 0l-31.808594-31.804687c-10.539062-10.539063-27.710937-10.539063-38.25 0-5.121093 5.117187-7.9375 11.921875-7.9375 19.132812 0 7.210938 2.816407 14.015625 7.914063 19.117188l31.808594 31.808594c2.089843 2.089843 3.117187 4.820312 3.117187 7.550781s-1.046875 5.460937-3.117187 7.550781c-4.160157 4.160156-10.921876 4.160156-15.082032 0l-47.808594-47.808594c-10.539062-10.539062-27.710937-10.539062-38.25 0-10.539062 10.539063-10.539062 27.714844 0 38.25l47.808594 47.808594c2.089844 2.09375 3.113282 4.824219 3.113282 7.554688 0 2.730468-1.042969 5.460937-3.113282 7.550781-4.160156 4.160156-10.921875 4.160156-15.082031 0l-26.476563-26.476563c-10.21875-10.21875-28.03125-10.21875-38.25 0-5.097656 5.121094-7.914062 11.90625-7.914062 19.117188 0 7.210937 2.816406 14.015625 7.914062 19.113281l79.808594 79.808594c2.089844 2.089843 3.113282 4.820312 3.113282 7.550781s-1.042969 5.460938-3.113282 7.554688c-4.160156 4.160156-10.921875 4.160156-15.082031 0zm0 0"/></svg>
                        </label>
                    </div>

                    <!-- Paper -->
                    <div>
                        <input type="radio" id="paper" name="choice" value="p">
                        <label for="paper" class="choice choice--paper">
                            <svg viewBox="0 -16 507.008 507" width="75" height="75" xmlns="http://www.w3.org/2000/svg"><path d="m496.277344 304.296875c0 34.132813-13.441406 66.988281-37.546875 91.09375l-37.761719 37.761719c-20.050781 20.050781-47.144531 31.144531-75.519531 31.144531h-275.839844c-11.730469 0-21.332031-9.386719-21.332031-21.332031 0-24.320313 18.132812-45.226563 42.238281-48.640625l107.09375-15.359375-176-176c-14.71875-14.722656-14.71875-38.613282 0-53.335938 14.722656-14.71875 38.613281-14.71875 53.335937 0l-26.667968-26.664062c-7.253906-7.253906-10.878906-16.640625-11.09375-26.242188 0-9.8125 3.628906-19.625 11.09375-27.09375 14.507812-14.503906 37.761718-14.71875 52.480468-.636718l27.519532 27.304687c-7.253906-7.253906-10.878906-16.640625-11.09375-26.027344-.214844-9.8125 3.628906-19.839843 11.09375-27.304687 14.71875-14.722656 38.613281-14.722656 53.332031 0l32 32c-7.253906-7.253906-10.878906-16.640625-11.09375-26.242188 0-9.8125 3.628906-19.625 11.09375-27.09375 14.722656-14.71875 38.613281-14.71875 53.335937 0l191.785157 191.789063c24.105469 24.105469 37.546875 56.746093 37.546875 90.878906zm0 0" fill="#ffcc80"/><path d="m345.492188 475.050781h-275.796876c-17.640624 0-32-14.359375-32-32 0-29.613281 22.101563-55.085937 51.414063-59.265625l85.953125-12.289062-160.917969-160.917969c-18.859375-18.855469-18.859375-49.554687 0-68.414063 7.101563-7.105468 15.851563-11.519531 25.042969-13.289062-17.234375-18.945312-16.679688-48.40625 1.625-66.710938 18.34375-18.324218 47.761719-18.835937 66.730469-1.601562 1.746093-9.191406 6.164062-17.960938 13.269531-25.066406 18.878906-18.878906 49.535156-18.878906 68.414062 0l3.648438 3.648437c1.769531-9.152343 6.1875-17.898437 13.269531-24.980469 18.878907-18.878906 49.535157-18.878906 68.414063 0l191.617187 191.617188c26.324219 26.324219 40.832031 61.332031 40.832031 98.582031 0 37.246094-14.507812 72.253907-40.832031 98.601563l-37.71875 37.714844c-21.800781 21.847656-52.050781 34.371093-82.964843 34.371093zm-297.128907-325.71875c-7.234375 0-14.015625 2.816407-19.117187 7.9375-10.535156 10.539063-10.535156 27.710938 0 38.25l176 176c2.859375 2.859375 3.863281 7.082031 2.582031 10.921875-1.300781 3.839844-4.628906 6.613282-8.617187 7.1875l-107.09375 15.296875c-18.859376 2.6875-33.085938 19.09375-33.085938 38.144531 0 5.886719 4.796875 10.667969 10.664062 10.667969h275.820313c25.277344 0 50.027344-10.242187 67.902344-28.117187l37.71875-37.71875c22.292969-22.292969 34.582031-51.96875 34.582031-83.519532 0-31.550781-12.289062-61.207031-34.582031-83.5l-191.660157-191.636718c-10.539062-10.539063-27.710937-10.539063-38.25 0-10.539062 10.539062-10.539062 27.710937 0 38.25l101.332032 101.335937c2.09375 2.089844 3.117187 4.820313 3.117187 7.550781 0 2.730469-1.046875 5.460938-3.117187 7.550782-4.160156 4.160156-10.921875 4.160156-15.082032 0l-133.332031-133.332032c-10.539062-10.539062-27.710937-10.539062-38.25 0-10.539062 10.539063-10.539062 27.710938 0 38.25l133.332031 133.332032c2.089844 2.09375 3.113282 4.824218 3.113282 7.554687s-1.042969 5.460938-3.113282 7.550781c-4.160156 4.160157-10.921874 4.160157-15.082031 0l-160-160c-10.21875-10.21875-28.03125-10.21875-38.25 0-5.101562 5.121094-7.914062 11.902344-7.914062 19.113282 0 7.210937 2.8125 13.996094 7.914062 19.09375l160 160c2.089844 2.09375 3.113281 4.824218 3.113281 7.554687s-1.046874 5.460938-3.113281 7.550781c-4.160156 4.160157-10.925781 4.160157-15.082031 0l-133.335938-133.332031c-5.097656-5.121093-11.882812-7.9375-19.113281-7.9375zm0 0"/></svg>
                        </label>
                    </div>

                    <!-- Scissors -->
                    <div>
                        <input type="radio" id="scissors" name="choice" value="s">
                        <label for="scissors" class="choice choice--scissors">
                            <svg viewBox="-78 0 512 512" width="75" height="75" xmlns="http://www.w3.org/2000/svg"><path d="m313.847656 181.332031c-17.34375 0-31.382812 13.804688-31.894531 31.019531v-41.683593c0-17.707031-14.503906-32-32-32-8.320313 0-15.785156 3.199219-21.332031 8.320312-6.613282 5.757813-10.667969 14.292969-10.667969 23.679688v-126.507813c0-18.347656-15.144531-33.492187-33.707031-33.492187-17.277344 0-31.785156 13.011719-33.492188 30.292969l-6.613281 177.917968c-.214844 6.402344-9.171875 8.320313-11.734375 2.347656l-59.730469-134.1875c-7.894531-17.917968-29.65625-24.746093-46.292969-14.71875-9.816406 5.972657-15.574218 16.425782-15.574218 27.519532 0 3.199218.425781 6.613281 1.492187 9.8125l53.332031 168.746094 2.988282 9.601562h2.558594l-8.042969 1.898438c-21.84375 5.140624-37.289063 24.640624-37.289063 47.082031 0 2.902343.257813 5.804687.789063 8.664062l8.960937 49.277344c7.296875 40.148437 33.066406 74.496094 69.546875 92.738281 18.003907 8.980469 37.84375 13.671875 57.984375 13.671875h47.1875c74.859375 0 135.550782-60.691406 135.550782-135.550781v-152.449219c-.019532-17.664062-14.335938-32-32.019532-32zm0 0" fill="#ffcc80"/><path d="m345.847656 213.332031c0-17.664062-14.335937-32-32-32zm0 0" fill="#ffcc80"/><path d="m210.296875 512h-47.167969c-21.675781 0-43.351562-5.121094-62.742187-14.804688-39.296875-19.648437-67.433594-57.195312-75.285157-100.375l-8.960937-49.277343c-.640625-3.480469-.960937-7.019531-.960937-10.5625 0-27.519531 18.710937-51.136719 45.503906-57.449219l144.042968-33.898438c5.207032-1.152343 10.410157 1.535157 12.351563 6.421876 6.722656 16.832031 6.359375 35.199218-1.042969 51.730468-7.402344 16.535156-20.863281 29.035156-37.867187 35.203125l-45.972657 16.722657c-2.132812.769531-3.050781 2.390624-3.414062 3.308593-.363281.894531-.8125 2.707031.191406 4.734375l13.078125 26.15625c2.644531 5.269532.492188 11.667969-4.777343 14.3125-5.292969 2.648438-11.671876.46875-14.316407-4.777344l-13.078125-26.15625c-3.457031-6.890624-3.796875-14.972656-.9375-22.164062 2.859375-7.1875 8.683594-12.84375 15.957032-15.464844l45.972656-16.726562c11.5625-4.179688 20.671875-12.671875 25.6875-23.871094 3.753906-8.429688 4.839844-17.515625 3.21875-26.371094l-134.226563 31.574219c-17.109375 4.03125-29.058593 19.117187-29.058593 36.714844 0 2.242187.191406 4.503906.597656 6.722656l8.960937 49.277344c6.65625 36.652343 30.527344 68.460937 63.828125 85.121093 16.46875 8.234376 34.878906 12.566407 53.25 12.566407h47.167969c68.863281 0 124.882813-56.023438 124.882813-124.886719v-40.832031c-6.269532 3.648437-13.566407 5.738281-21.332032 5.738281-23.53125 0-42.667968-19.136719-42.667968-42.667969v-74.6875c0-23.53125 19.136718-42.664062 42.667968-42.664062s42.667969 19.132812 42.667969 42.664062v152.449219c0 80.617188-65.578125 146.21875-146.21875 146.21875zm103.550781-320c-11.753906 0-21.332031 9.578125-21.332031 21.332031v74.667969c0 11.777344 9.578125 21.332031 21.332031 21.332031s21.332032-9.554687 21.332032-21.332031v-74.667969c0-11.753906-9.554688-21.332031-21.332032-21.332031zm0 0"/><path d="m249.847656 320c-23.53125 0-42.667968-19.136719-42.667968-42.667969v-106.664062c0-23.53125 19.136718-42.667969 42.667968-42.667969s42.667969 19.136719 42.667969 42.667969v42.664062c0 5.890625-4.78125 10.667969-10.667969 10.667969 5.886719 0 10.667969 4.777344 10.667969 10.667969v42.664062c0 23.53125-19.136719 42.667969-42.667969 42.667969zm0-170.667969c-11.753906 0-21.332031 9.578125-21.332031 21.335938v106.664062c0 11.777344 9.578125 21.335938 21.332031 21.335938s21.332032-9.558594 21.332032-21.335938v-42.664062c0-5.890625 4.78125-10.667969 10.667968-10.667969-5.886718 0-10.667968-4.777344-10.667968-10.667969v-42.664062c0-11.757813-9.554688-21.335938-21.332032-21.335938zm0 0"/><path d="m68.515625 298.667969c-4.523437 0-8.746094-2.902344-10.175781-7.46875l-56.320313-178.347657c-6.015625-19.050781 1.75-39.507812 18.859375-49.769531 10.601563-6.355469 23.445313-7.828125 35.175782-4.09375 11.753906 3.753907 21.335937 12.394531 26.285156 23.699219l51.902344 116.394531 5.929687-158.570312c2.304687-23.382813 21.25-40.511719 44.097656-40.511719 24.40625 0 44.265625 19.863281 44.265625 44.265625v126.402344c0 5.886719-4.777344 10.664062-10.667968 10.664062-5.886719 0-10.664063-4.777343-10.664063-10.664062v-126.402344c-.023437-12.648437-10.285156-22.933594-22.933594-22.933594-11.839843 0-21.652343 8.875-22.828125 20.652344l-6.613281 177.28125c-.296875 7.871094-5.886719 14.398437-13.632813 15.890625-7.65625 1.472656-15.359374-2.472656-18.558593-9.664062l-59.816407-134.183594c-2.519531-5.761719-7.339843-10.09375-13.25-11.992188-5.972656-1.898437-12.394531-1.152344-17.707031 2.050782-8.617187 5.160156-12.523437 15.484374-9.515625 25.066406l56.34375 178.367187c1.769532 5.609375-1.324218 11.605469-6.957031 13.375-1.066406.320313-2.152344.492188-3.21875.492188zm0 0"/></svg>
                        </label>  
                    </div>
                </div>

                <div class="text-center">
                    <button type="submit" class="btn">Fight</button>
                </div>
            </form>
        </div>


    </div>
</body>
</html>